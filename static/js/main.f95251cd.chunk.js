(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,n){e.exports=n(197)},111:function(e,t,n){},113:function(e,t,n){},197:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(69),c=n.n(i),l=(n(111),n(12)),o=n(13),u=n(15),s=n(14),m=n(16),p=(n(113),n(3)),d=n(11),h=n(8);function f(){var e=Object(d.a)(["\n       fragment CompleteRecipe on Recipe {\n           id\n           name\n           imgUrl\n           category\n           description\n           instructions\n           createdDate\n           likes,\n           username\n       }\n   "]);return f=function(){return e},e}var g={recipe:Object(h.b)(f())};function v(){var e=Object(d.a)(["\n    mutation($id: ID!, $name: String!, $imgUrl: String!, $description: String!, $category: String!,\n    $instructions: String!) {\n        updateUserRecipe(id: $id, name: $name, imgUrl: $imgUrl, description: $description, category: $category,\n            instructions: $instructions) {\n            id\n            name\n            category\n            imgUrl\n            description\n            instructions\n        }\n    }\n"]);return v=function(){return e},e}function E(){var e=Object(d.a)(["\n    mutation($id: ID!, $username: String!) {\n        unlikeRecipe(id: $id, username: $username) {\n            id\n            name\n            likes\n        }\n    }\n"]);return E=function(){return e},e}function b(){var e=Object(d.a)(["\n    mutation($id: ID!, $username: String!) {\n        likeRecipe(id: $id, username: $username) {\n            id\n            name\n            likes\n        }\n    }\n"]);return b=function(){return e},e}function y(){var e=Object(d.a)(["\n    mutation($id: ID!) {\n        deleteUserRecipe(id: $id) {\n            id\n        }\n    }\n"]);return y=function(){return e},e}function j(){var e=Object(d.a)(["\n    query($username: String!) {\n        getUserRecipes(username: $username) {\n            id\n            name\n            likes\n            imgUrl\n            category\n            description\n            instructions\n        }\n    }\n"]);return j=function(){return e},e}function k(){var e=Object(d.a)(["\n    mutation($name: String!, $imgUrl: String!, $description: String!, $category: String!, $instructions: String!, $username: String) {\n        addRecipe(name: $name, imgUrl: $imgUrl, description: $description,\n            category: $category, instructions: $instructions, username: $username) {\n            ...CompleteRecipe\n        }\n    }\n    ","\n"]);return k=function(){return e},e}function O(){var e=Object(d.a)(["\n    query($searchTerm: String) {\n        searchRecipe(searchTerm: $searchTerm) {\n            id\n            name\n            likes\n        }\n    }\n"]);return O=function(){return e},e}function C(){var e=Object(d.a)(["\n    query($id: ID!) {\n        getRecipe(id: $id) {\n            ...CompleteRecipe\n        }\n    }\n    ","\n"]);return C=function(){return e},e}function S(){var e=Object(d.a)(["\n    query {\n        getCurrentUser {\n            username\n            joinDate\n            email\n            favorites {\n                id\n                name\n            }\n        }\n    }\n"]);return S=function(){return e},e}function w(){var e=Object(d.a)(["\n    mutation($username: String!, $password: String!) {\n        signinUser(username: $username, password: $password) {\n            token\n        }\n    }\n"]);return w=function(){return e},e}function U(){var e=Object(d.a)(["\n    mutation($username: String!, $email: String!, $password: String!) {\n        signupUser(username: $username, email: $email, password: $password) {\n            token\n        }\n    }\n"]);return U=function(){return e},e}function $(){var e=Object(d.a)(["\n    query {\n        getAllRecipes {\n            id\n            name\n            imgUrl\n            description\n            instructions\n            category\n        }\n    }\n"]);return $=function(){return e},e}var R=Object(h.b)($()),N=Object(h.b)(U()),A=Object(h.b)(w()),x=Object(h.b)(S()),q=Object(h.b)(C(),g.recipe),D=Object(h.b)(O()),I=Object(h.b)(k(),g.recipe),F=Object(h.b)(j()),M=Object(h.b)(y()),L=Object(h.b)(b()),Q=Object(h.b)(E()),B=Object(h.b)(v()),P=n(127),T=n(50),Y=T.a.li({shown:{opacity:1},hidden:{opacity:0}}),_=function(e){var t=e.recipe;return r.a.createElement(Y,{className:"card",style:{background:"url(".concat(t.imgUrl,") center/cover no-repeat")}},r.a.createElement("span",{className:t.category},t.category),r.a.createElement("div",{className:"card-text"},r.a.createElement(P.a,{to:"/recipe/".concat(t.id)},r.a.createElement("h4",null,t.name))))},H=n(99),W=function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement(H.PulseLoader,{color:"#1eaedb",size:3,margin:"3px"}))},z=T.a.ul({shown:{x:"0%",staggerChildren:100},hidden:{x:"-100%"}}),J=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={on:!1},n.slideIn=function(){n.setState({on:!n.state.on})},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){setTimeout(this.slideIn,200)}},{key:"render",value:function(){var e=this.state.on;return r.a.createElement("div",{className:"App"},r.a.createElement("h1",{className:"main-title"},"Find Recipes You ",r.a.createElement("strong",null,"Love")),r.a.createElement(p.Query,{query:R},function(t){var n=t.data,a=t.loading,i=t.error;return a?r.a.createElement(W,null):i?r.a.createElement("div",null,i.message):r.a.createElement(z,{pose:e?"shown":"hidden",className:"cards"},n.getAllRecipes.map(function(e){return r.a.createElement(_,{recipe:e,key:e.id})}))}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=n(203),X=n(204),K=n(194),V=n(202),Z=n(18),ee=n.n(Z),te=n(21),ne=n(20),ae=n(17),re=function(e){var t=e.error;return r.a.createElement("div",null,r.a.createElement("p",null,t.message))},ie=n(205),ce={username:"",password:""},le=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state=Object(ae.a)({},ce),n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(ne.a)({},a,r))},n.clearState=function(){n.setState(Object(ae.a)({},ce))},n.handleSubmit=function(e,t){e.preventDefault(),t().then(function(){var e=Object(te.a)(ee.a.mark(function e(t){var a;return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,console.log(a),localStorage.setItem("token",a.signinUser.token),e.next=5,n.props.refetch();case 5:n.clearState(),n.props.history.push("/");case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())},n.validateForm=function(){var e=n.state,t=e.username,a=e.password;return!t||!a},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.username,a=t.password;return r.a.createElement("div",{className:"App"},r.a.createElement("h2",{className:"App"},"Signin"),r.a.createElement(p.Mutation,{mutation:A,variables:{username:n,password:a}},function(t,i){i.data;var c=i.loading,l=i.error;return r.a.createElement("form",{onSubmit:function(n){return e.handleSubmit(n,t)},className:"form"},r.a.createElement("input",{type:"text",name:"username",placeholder:"Username",onChange:e.handleChange,value:n}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:e.handleChange,value:a}),r.a.createElement("button",{disabled:c||e.validateForm(),type:"submit",className:"button-primary"},"Submit"),l&&r.a.createElement(re,{error:l}))}))}}]),t}(r.a.Component),oe=Object(ie.a)(le),ue={username:"",email:"",password:"",passwordConfirmation:""},se=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state=Object(ae.a)({},ue),n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(ne.a)({},a,r))},n.clearState=function(){n.setState(Object(ae.a)({},ue))},n.handleSubmit=function(e,t){e.preventDefault(),t().then(function(){var e=Object(te.a)(ee.a.mark(function e(t){var a;return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data,console.log(a),localStorage.setItem("token",a.signupUser.token),e.next=5,n.props.refetch();case 5:n.clearState(),n.props.history.push("/");case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())},n.validateForm=function(){var e=n.state,t=e.username,a=e.email,r=e.password,i=e.passwordConfirmation;return!t||!a||!r||r!==i},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.username,a=t.email,i=t.password,c=t.passwordConfirmation;return r.a.createElement("div",{className:"App"},r.a.createElement("h2",{className:"App"},"Signup"),r.a.createElement(p.Mutation,{mutation:N,variables:{username:n,email:a,password:i}},function(t,l){l.data;var o=l.loading,u=l.error;return r.a.createElement("form",{onSubmit:function(n){return e.handleSubmit(n,t)},className:"form"},r.a.createElement("input",{type:"text",name:"username",placeholder:"Username",onChange:e.handleChange,value:n}),r.a.createElement("input",{type:"email",name:"email",placeholder:"Email Address",onChange:e.handleChange,value:a}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:e.handleChange,value:i}),r.a.createElement("input",{type:"password",name:"passwordConfirmation",placeholder:"Confirm Password",onChange:e.handleChange,value:c}),r.a.createElement("button",{disabled:o||e.validateForm(),type:"submit",className:"button-primary"},"Submit"),u&&r.a.createElement(re,{error:u}))}))}}]),t}(r.a.Component),me=Object(ie.a)(se),pe=function(e){return function(t){return r.a.createElement(p.Query,{query:x},function(n){var a=n.data,i=n.loading,c=n.refetch;return i?null:r.a.createElement(e,Object.assign({},t,{refetch:c,session:a}))})}},de=n(201),he=Object(ie.a)(function(e){var t=e.history;return r.a.createElement(p.ApolloConsumer,null,function(e){return r.a.createElement("button",{onClick:function(){return function(e,t){localStorage.removeItem("token"),e.resetStore(),t.push("/")}(e,t)}},"Sign out")})}),fe=function(){return r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(de.a,{to:"/",exact:!0},"Home")),r.a.createElement("li",null,r.a.createElement(de.a,{to:"/search"},"Search")),r.a.createElement("li",null,r.a.createElement(de.a,{to:"/signin"},"Sign in")),r.a.createElement("li",null,r.a.createElement(de.a,{to:"/signup"},"Sign up")))},ge=function(e){var t=e.session;return r.a.createElement(a.Fragment,null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(de.a,{to:"/",exact:!0},"Home")),r.a.createElement("li",null,r.a.createElement(de.a,{to:"/search"},"Search")),r.a.createElement("li",null,r.a.createElement(de.a,{to:"/recipe/add"},"Add Recipe")),r.a.createElement("li",null,r.a.createElement(de.a,{to:"/profile"},"Profile")),r.a.createElement("li",null,r.a.createElement(he,null))),r.a.createElement("h4",null,"Welcome, ",r.a.createElement("strong",null,t.getCurrentUser.username)))},ve=function(e){var t=e.session;return r.a.createElement("nav",null,t&&t.getCurrentUser?r.a.createElement(ge,{session:t}):r.a.createElement(fe,null))},Ee=function(e){var t=e.recipe;return r.a.createElement("li",{key:t.id},r.a.createElement(P.a,{to:"/recipe/".concat(t.id)},t.name),r.a.createElement("p",null,"Likes: ",t.likes))},be=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){n.setState({searchResult:e.searchRecipe})},n.state={searchResult:[]},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state.searchResult;return r.a.createElement(p.ApolloConsumer,null,function(n){return r.a.createElement("div",{className:"App"},r.a.createElement("input",{className:"search",type:"search",placeholder:"Search for recipes",onChange:function(){var t=Object(te.a)(ee.a.mark(function t(a){var r,i;return ee.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.persist(),t.next=3,n.query({query:D,variables:{searchTerm:a.target.value}});case 3:r=t.sent,i=r.data,e.handleChange(i);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}),r.a.createElement("ul",null,t.map(function(e){return r.a.createElement(Ee,{recipe:e})})))})}}]),t}(r.a.Component),ye=n(104),je=function(e){return function(t){return function(n){return r.a.createElement(p.Query,{query:x},function(n){var a=n.data;return n.loading?null:e(a)?r.a.createElement(t,null):r.a.createElement(V.a,{to:"/"})})}}},ke=n(102),Oe=n.n(ke),Ce={name:"",instructions:"",category:"Breakfast",description:"",username:"",imgUrl:""},Se=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state=Object(ae.a)({},Ce),n.clearState=function(){n.setState(Object(ae.a)({},Ce))},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(ne.a)({},a,r))},n.handleEditorChange=function(e){var t=e.editor.getData();n.setState({instructions:t})},n.validateForm=function(){var e=n.state,t=e.name,a=e.category,r=e.description,i=e.instructions,c=e.imgUrl;return!t||!c||!a||!r||!i},n.handleSubmit=function(e,t){e.preventDefault(),t().then(function(e){var t=e.data;console.log(t),n.clearState(),n.props.history.push("/")})},n.updateCache=function(e,t){var n=t.data.addRecipe,a=e.readQuery({query:R}).getAllRecipes;e.writeQuery({query:R,data:{getAllRecipes:[n].concat(Object(ye.a)(a))}})},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.setState({username:this.props.session.getCurrentUser.username})}},{key:"render",value:function(){var e=this,t=this.state,n=t.name,a=t.imgUrl,i=t.category,c=t.description,l=t.instructions,o=t.username;return r.a.createElement(p.Mutation,{mutation:I,variables:{name:n,imgUrl:a,category:i,description:c,instructions:l,username:o},refetchQueries:function(){return[{query:F,variables:{username:o}}]},update:this.updateCache},function(t,o){o.data;var u=o.loading,s=o.error;return r.a.createElement("div",{className:"App"},r.a.createElement("h2",{className:"App"},"Add Recipe"),r.a.createElement("form",{className:"form",onSubmit:function(n){return e.handleSubmit(n,t)}},r.a.createElement("input",{type:"text",name:"name",onChange:e.handleChange,placeholder:"Recipe Name",value:n}),r.a.createElement("input",{type:"text",name:"imgUrl",onChange:e.handleChange,placeholder:"Recipe Image",value:a}),r.a.createElement("select",{name:"category",onChange:e.handleChange,value:i},r.a.createElement("option",{value:"Breakfast"},"Breakfast"),r.a.createElement("option",{value:"Lunch"},"Lunch"),r.a.createElement("option",{value:"Dinner"},"Dinner"),r.a.createElement("option",{value:"Snack"},"Snack")),r.a.createElement("input",{type:"text",name:"description",onChange:e.handleChange,placeholder:"Add Description",value:c}),r.a.createElement("label",{htmlFor:"instructions"},"Add Instructions"),r.a.createElement(Oe.a,{name:"instructions",content:l,events:{change:e.handleEditorChange}}),r.a.createElement("button",{disabled:u||e.validateForm(),type:"submit",className:"button-primary"},"Submit"),s&&r.a.createElement(re,{error:s})))})}}]),t}(r.a.Component),we=je(function(e){return e&&e.getCurrentUser})(Object(ie.a)(pe(Se))),Ue=function(e){var t=e.session;return r.a.createElement("div",{className:"App"},r.a.createElement("h3",null,"UserInfo"),r.a.createElement("p",null,"Username: ",t.getCurrentUser.username),r.a.createElement("p",null,"Email: ",t.getCurrentUser.email),r.a.createElement("ul",null,r.a.createElement("h3",null,t.getCurrentUser.username,"'s Favorites"),t.getCurrentUser.favorites.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(P.a,{to:"/recipe/".concat(e.id)},e.name))}),!t.getCurrentUser.favorites.length&&r.a.createElement("p",null,r.a.createElement("strong",null,"You have no favorite recipe. Go add some!"))))},$e=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",imgUrl:"",category:"",description:"",instructions:"",modal:!1},n.handleDelete=function(e){window.confirm("Are you sure want to delete this recipe?")&&e().then(function(e){var t=e.data;return console.log(t)})},n.closeModal=function(){n.setState({modal:!1})},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(ne.a)({},a,r))},n.loadRecipe=function(e){n.setState(Object(ae.a)({},e,{modal:!0}))},n.handleSubmit=function(e,t){e.preventDefault(),t().then(function(e){var t=e.data;console.log(t),n.closeModal()})},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.username,n=this.state.modal;return r.a.createElement(p.Query,{query:F,variables:{username:t}},function(a){var i=a.data,c=a.loading,l=a.error;return c?r.a.createElement(W,null):l?r.a.createElement("div",null,"Error"):r.a.createElement("ul",{className:"App"},n&&r.a.createElement(Re,{recipe:e.state,closeModal:e.closeModal,handleChange:e.handleChange,handleSubmit:e.handleSubmit}),r.a.createElement("h3",null,"Your Recipes"),!i.getUserRecipes.length&&r.a.createElement("p",null,r.a.createElement("strong",null,"You have not added any recipe yet")),i.getUserRecipes.map(function(n){return r.a.createElement("li",{key:n.id},r.a.createElement(P.a,{to:"/recipe/".concat(n.id)},n.name),r.a.createElement("p",null,"Likes: ",n.likes),r.a.createElement(p.Mutation,{mutation:M,variables:{id:n.id},refetchQueries:function(){return[{query:R},{query:x}]},update:function(e,n){var a=n.data.deleteUserRecipe,r=e.readQuery({query:F,variables:{username:t}}).getUserRecipes;e.writeQuery({query:F,variables:{username:t},data:{getUserRecipes:r.filter(function(e){return e.id!==a.id})}})}},function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.a.createElement("div",null,r.a.createElement("button",{className:"button-primary",onClick:function(){return e.loadRecipe(n)}},"Update"),r.a.createElement("p",{className:"delete-button",style:{marginBottom:0},onClick:function(){return e.handleDelete(t)}},a.loading?"deleting...":"X"))}))}))})}}]),t}(r.a.Component),Re=function(e){var t=e.handleSubmit,n=e.handleChange,a=e.closeModal,i=e.recipe;return r.a.createElement(p.Mutation,{mutation:B,variables:{id:i.id,name:i.name,imgUrl:i.imgUrl,category:i.category,description:i.description,instructions:i.instructions}},function(e){return r.a.createElement("div",{className:"modal modal-open"},r.a.createElement("div",{className:"modal-inner"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("form",{onSubmit:function(n){return t(n,e)},className:"modal-content-inner"},r.a.createElement("h4",null,"Edit Recipe"),r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",name:"name",onChange:n,value:i.name}),r.a.createElement("label",{htmlFor:"imgUrl"},"Image"),r.a.createElement("input",{type:"text",name:"imgUrl",onChange:n,value:i.imgUrl}),r.a.createElement("label",{htmlFor:"category"},"Category"),r.a.createElement("select",{name:"category",onChange:n,value:i.category},r.a.createElement("option",{value:"Breakfast"},"Breakfast"),r.a.createElement("option",{value:"Lunch"},"Lunch"),r.a.createElement("option",{value:"Dinner"},"Dinner"),r.a.createElement("option",{value:"Snack"},"Snack")),r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("input",{type:"text",name:"description",onChange:n,value:i.description}),r.a.createElement("label",{htmlFor:"instructions"},"Add Instructions"),r.a.createElement("input",{type:"text",name:"instructions",onChange:n,value:i.instructions}),r.a.createElement("hr",null),r.a.createElement("div",{className:"modal-buttons"},r.a.createElement("button",{className:"button-primary",type:"submit"},"Update"),r.a.createElement("button",{onClick:a},"Cancel"))))))})},Ne=$e,Ae=je(function(e){return e&&e.getCurrentUser})(pe(function(e){var t=e.session;return r.a.createElement("div",null,r.a.createElement(Ue,{session:t}),r.a.createElement(Ne,{username:t.getCurrentUser.username}))})),xe=pe(function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={liked:!1,username:""},n.handleClick=function(e,t){n.setState(function(e){return{liked:!e.liked}},function(){return n.handleLike(e,t)})},n.handleLike=function(e,t){n.state.liked?e().then(function(){var e=Object(te.a)(ee.a.mark(function e(t){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.data,e.next=3,n.props.refetch();case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()):t().then(function(){var e=Object(te.a)(ee.a.mark(function e(t){return ee.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.data,e.next=3,n.props.refetch();case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())},n.updateLike=function(e,t){var a=t.data.likeRecipe,r=n.props.id,i=e.readQuery({query:q,variables:{id:r}}).getRecipe;e.writeQuery({query:q,variables:{id:r},data:{getRecipe:Object(ae.a)({},i,{likes:a.likes+1})}})},n.updateUnlike=function(e,t){var a=t.data.unlikeRecipe,r=n.props.id,i=e.readQuery({query:q,variables:{id:r}}).getRecipe;e.writeQuery({query:q,variables:{id:r},data:{getRecipe:Object(ae.a)({},i,{likes:a.likes-1})}})},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.session.getCurrentUser,t=this.props.id;if(e){var n=e.username,a=e.favorites.findIndex(function(e){return e.id===t})>-1;this.setState({username:n,liked:a})}}},{key:"render",value:function(){var e=this,t=this.state,n=t.username,a=t.liked,i=this.props.id;return r.a.createElement(p.Mutation,{mutation:Q,variables:{id:i,username:n},update:this.updateUnlike},function(t){return r.a.createElement(p.Mutation,{mutation:L,variables:{id:i,username:n},update:e.updateLike},function(i){return n&&r.a.createElement("button",{className:"like-button",onClick:function(){return e.handleClick(i,t)}},a?"Liked":"Like")})})}}]),t}(r.a.Component)),qe=Object(ie.a)(function(e){var t=e.match.params.id;return r.a.createElement(p.Query,{query:q,variables:{id:t}},function(e){var n=e.data,a=e.loading,i=e.error;return a?r.a.createElement(W,null):i?r.a.createElement("div",null,"Error"):r.a.createElement("div",{className:"App"},r.a.createElement("div",{style:{background:"url(".concat(n.getRecipe.imgUrl,") center center / cover no-repeat")},className:"recipe-image"}),r.a.createElement("div",{className:"recipe"},r.a.createElement("div",{className:"recipe-header"},r.a.createElement("h2",{className:"recipe-name"},r.a.createElement("strong",null,n.getRecipe.name)),r.a.createElement("h5",null,r.a.createElement("strong",null,n.getRecipe.category)),r.a.createElement("p",null,"Created by ",r.a.createElement("strong",null,n.getRecipe.username)),r.a.createElement("p",null,n.getRecipe.likes,r.a.createElement("span",{role:"img","aria-label":"heart"},"\u2764"))),r.a.createElement("blockquote",{className:"recipe-description"},n.getRecipe.description),r.a.createElement("h3",{className:"recipe-instructions__title"},"Instructions"),r.a.createElement("div",{className:"recipe-instructions",dangerouslySetInnerHTML:{__html:n.getRecipe.instructions}}),r.a.createElement(xe,{id:t})))})}),De=new h.a({uri:"https://recipello.herokuapp.com/graphql",fetchOptions:{credentials:"include"},request:function(e){var t=localStorage.getItem("token");e.setContext({headers:{authorization:t}})},onError:function(e){var t=e.networkError;t&&(console.log("Network error",t),401===t.statusCode&&localStorage.removeItem("token"))}}),Ie=pe(function(e){var t=e.refetch,n=e.session;return r.a.createElement(G.a,null,r.a.createElement(a.Fragment,null,r.a.createElement(ve,{session:n}),r.a.createElement(X.a,null,r.a.createElement(K.a,{exact:!0,path:"/",component:J}),r.a.createElement(K.a,{path:"/search",component:be}),r.a.createElement(K.a,{path:"/signin",render:function(){return r.a.createElement(oe,{refetch:t})}}),r.a.createElement(K.a,{path:"/signup",render:function(){return r.a.createElement(me,{refetch:t})}}),r.a.createElement(K.a,{path:"/recipe/add",component:we}),r.a.createElement(K.a,{path:"/recipe/:id",component:qe}),r.a.createElement(K.a,{path:"/profile",component:Ae}),r.a.createElement(V.a,{to:"/"}))))});c.a.render(r.a.createElement(p.ApolloProvider,{client:De},r.a.createElement(Ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[106,2,1]]]);
//# sourceMappingURL=main.f95251cd.chunk.js.map